## API Report File for "cpcall"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

/// <reference types="node" />

import { Cpc as Cpc_2 } from 'cpcall';
import { CpcCmdList as CpcCmdList_3 } from 'cpcall';
import type { Duplex } from 'node:stream';
import { EventEmitter } from '#lib/event_emitter.js';
import type { EventEmitter as EventEmitter_2 } from 'node:events';

declare namespace core {
    export {
        Cpc,
        CpcFrame,
        FrameType,
        CpcEvents,
        CpcCmdList_2 as CpcCmdList,
        CpcError,
        CpcCallError,
        CpcFailRespondError,
        CpcFailAsyncRespondError,
        CpcUnregisteredCommandError,
        CpcUnknownFrameTypeError,
        StreamReader,
        CpcStreamCtrl,
        StreamCpc
    }
}
export { core }

// Warning: (ae-forgotten-export) The symbol "CpcCmdList" needs to be exported by the entry point index.d.ts
//
// @public
abstract class Cpc<CallList extends object = CpcCmdList, CmdList extends object = CpcCmdList, Ev extends CpcEvents = CpcEvents> extends EventEmitter<Ev> {
    constructor(maxAsyncId?: number);
    // Warning: (ae-forgotten-export) The symbol "GetAnyVoidCmd" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    call<T extends GetAnyVoidCmd<CallList>>(cmd: T): Promise<any>;
    // Warning: (ae-forgotten-export) The symbol "GetVoidCmds" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "GetVoidFn" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    call<T extends GetVoidCmds<CallList>, R = ReturnType<GetVoidFn<CallList[T]>>>(cmd: T): Promise<R>;
    // (undocumented)
    call<T extends GetCmds<CallList>, Fn extends CmdFx = GetFn<CallList[T]>>(cmd: T, arg: Parameters<Fn>): Promise<ReturnType<Fn>>;
    // Warning: (ae-forgotten-export) The symbol "CallOptions" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    call<T extends GetCmds<CallList>, Fn extends CmdFx = GetFn<CallList[T]>>(cmd: T, arg: Parameters<Fn>, options: CallOptions): Promise<ReturnType<Fn>>;
    protected get closeable(): boolean;
    get closed(): boolean;
    dispose(error?: Error): void;
    end(): void;
    // (undocumented)
    exec<T extends GetAnyVoidCmd<CallList>>(cmd: T): void;
    // (undocumented)
    exec<T extends GetVoidCmds<CallList>>(cmd: T): void;
    // (undocumented)
    exec<T extends GetCmds<CallList>, Arg extends any[] = Parameters<GetFn<CallList[T]>>>(cmd: T, arg: Arg): void;
    protected finalClose(error?: Error): void;
    protected finalEnd(): void;
    getAllCmd(): {
        [k: string]: CmdFx;
    };
    get isEnded(): boolean;
    // (undocumented)
    protected onCpcError(error: Error): void;
    // (undocumented)
    protected onCpcFrame(frame: CpcFrame): void;
    // (undocumented)
    removeCmd<T extends GetCmds<CmdList>>(cmd: T): void;
    // (undocumented)
    removeCmd(cmd: string | number): void;
    protected abstract sendFrame(frame: CpcFrame): void;
    // Warning: (ae-forgotten-export) The symbol "GetCmds" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "GetFn" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    setCmd<T extends GetCmds<CmdList>, Fn extends GetFn<CmdList[T]>>(cmd: T, fx: Fn): void;
    protected get waitingResponseNum(): number;
    protected get waitingResultNum(): number;
}

// @public
class CpcCallError extends Error {
    constructor(msg?: string);
}

// @public (undocumented)
type CpcCmdList_2 = {
    [key: string | number]: (...args: any[]) => any;
};

// @public (undocumented)
class CpcError extends Error {
}

// @public (undocumented)
type CpcEvents = {
    end: [];
    close: [error?: Error];
    error: [error: Error];
};

// @public
class CpcFailAsyncRespondError extends CpcFailRespondError {
}

// @public
class CpcFailRespondError extends CpcCallError {
    constructor();
}

// Warning: (ae-forgotten-export) The symbol "F_call" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "F_asyncRes" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "F_returnAsync" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "F_end" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "F_return" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "F_throw" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
type CpcFrame = F_call | F_asyncRes | F_returnAsync | F_end | F_return | F_throw;

// @public (undocumented)
interface CpcStreamCtrl {
    // (undocumented)
    handshake?: number;
    // (undocumented)
    isWriteable?: () => boolean;
    // (undocumented)
    read: StreamReader;
    // Warning: (ae-forgotten-export) The symbol "StreamWriter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    write: StreamWriter;
}

// @public (undocumented)
class CpcUnknownFrameTypeError extends Error {
    constructor(frameType: any);
}

// @public
class CpcUnregisteredCommandError extends CpcCallError {
    constructor();
}

// Warning: (ae-forgotten-export) The symbol "NodeProcess" needs to be exported by the entry point index.d.ts
//
// @public
function createNodePsCpc<CallableCmd extends object = CpcCmdList_3, CmdList extends object = CpcCmdList_3>(process: NodeProcess, advSerialization?: boolean): Cpc_2<CallableCmd, CmdList>;

// @public (undocumented)
function createSocketCpc<CallableCmd extends object = CpcCmdList_3, CmdList extends object = CpcCmdList_3>(duplex: Duplex): Cpc_2<CallableCmd, CmdList>;

// @public (undocumented)
enum FrameType {
    // (undocumented)
    actionResponse = 7,
    // (undocumented)
    call = 1,
    // (undocumented)
    exec = 2,
    fin = 254,
    // (undocumented)
    reject = 10,
    // (undocumented)
    resolve = 9,
    // (undocumented)
    return = 11,
    // (undocumented)
    returnAsync = 8,
    // (undocumented)
    throw = 12
}

declare namespace node {
    export {
        createNodePsCpc,
        createSocketCpc
    }
}
export { node }

// @public (undocumented)
class StreamCpc<CallableCmd extends object = CpcCmdList_2, CmdList extends object = CpcCmdList_2, Ev extends CpcEvents = CpcEvents> extends Cpc<CallableCmd, CmdList, Ev> {
    constructor(streamCtrl: CpcStreamCtrl);
    // (undocumented)
    protected sendFrame(frame: CpcFrame): void;
}

// @public (undocumented)
interface StreamReader {
    // (undocumented)
    (len: number, safe?: false): Promise<Uint8Array>;
    // (undocumented)
    (len: number, safe: true): Promise<Uint8Array | null>;
    // (undocumented)
    (len: number, safe?: boolean): Promise<Uint8Array | null>;
}

declare namespace web {
    export {
        WebSocketCpc
    }
}
export { web }

// @beta (undocumented)
class WebSocketCpc<CallableCmd extends object = CpcCmdList_2, CmdList extends object = CpcCmdList_2> extends Cpc<CallableCmd, CmdList> {
    // (undocumented)
    static createConnect(url: string | URL, protocols?: string | string[]): Promise<WebSocketCpc<CpcCmdList_2, CpcCmdList_2>>;
    // (undocumented)
    protected sendFrame(frame: CpcFrame): void;
}

// Warnings were encountered during analysis:
//
// packages/cpcall/src/core/cpc/cpc.ts:91:9 - (ae-forgotten-export) The symbol "CmdFx" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
